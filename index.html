<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en-US" xml:lang="en-US" 
xmlns="http://www.w3.org/1999/xhtml"
xmlns:og="http://opengraphprotocol.org/schema/"
xmlns:fb="http://www.facebook.com/2008/fbml">

<head>
	<title>Name That Key - Find a Song's Key by It's Chords</title>
        <meta http-equiv="Content-type" content="text/html;charset=UTF-8" />
	<meta property="og:title" content="Name That Key"/>
	<meta property="og:type" content="website"/>
	<meta property="og:url" content="http://namethatkey.com/"/>
	<meta property="og:image" content="http://www.namethatkey.com/goodcleflogo.png"/>
	<meta property="og:site_name" content="Name That Key"/>
	<meta property="fb:admins" content="USER_ID"/>
	<meta property="og:description" content="Automatically get the key to a song by it's chords."/>

	<meta property="fb:app_id" content="101161859945450" />
	<meta name="copyright" content="Garrett Grimm &amp; Rob Law, 2010" />
	<meta name="keywords" content="find a song key by chords, figure out a keys, music, chords, guitar, piano, find key online tool" />
	<meta name="description" content="Automatically get the key to a song by it's chords." />
	<meta name="author" content="Garrett Grimm &amp; Rob Law August 17, 2010" />
	<link rel="shortcut icon" href="../favicon.ico" />

		
	<link href="style.css" media="all" rel="stylesheet" type="text/css"/>
	<script src="http://documentcloud.github.com/underscore/underscore-min.js" type="text/javascript"></script>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js" type="text/javascript"></script>
	<script language="JavaScript" type="text/javascript">
			var Keys = {
					// MAJOR KEYS
					// C major
					'C Major': ['C', 'Cmaj7', 'Dm', 'Dm7', 'Em', 'Em7', 'F', 'Fmaj7', 'G', 'G7', 'Am', 'Am7', 'Bdim'],
	
					// C# major	
					'C# Major': ['C#', 'C#maj7', 'D#m', 'D#m7', 'E#m', 'E#m7', 'F#', 'F#maj7', 'G#', 'G#7', 'A#m', 'A#m7', 'B#dim'],
	
					//Db major
					'Db Major': ['Db', 'Dbmaj7', 'Ebm', 'Ebm7', 'Fm', 'Fm7', 'Gb', 'Gbmaj7', 'Ab', 'Ab7', 'Bbm', 'Bbm7', 'Cdim'],

					//D major
					'D Major': ['D', 'Dmaj7', 'Em', 'Em7', 'F#m', 'F#m7', 'G', 'Gmaj7', 'A', 'A7', 'Bm', 'Bm7', 'C#dim'],

					//D# major
					'D# Major': ['D#', 'D#maj7', 'E#m', 'E#m7', 'F##m', 'F##m7', 'G#', 'G#maj7', 'A#', 'A#7', 'B#m', 'B#m7', 'C##dim'],

					//Eb major
					'Eb Major': ['Eb', 'Ebmaj7', 'Fm', 'Fm7', 'Gm', 'Gm7', 'Ab', 'Abmaj7', 'Bb', 'Bb7', 'Cm', 'Cm7', 'Ddim'],

					//E major
					'E Major': ['E', 'Emaj7', 'F#m', 'F#m7', 'G#m', 'G#m7', 'A', 'Amaj7', 'B', 'B7', 'C#m', 'C#m7', 'D#dim'],

					//F major
					'F Major': ['F', 'Fmaj7', 'Gm', 'Gm7', 'Am', 'Am7', 'Bb', 'Bbmaj7', 'C', 'C7', 'Dm', 'Dm7', 'Edim'],

					//F# major
					'F# Major': ['F#', 'F#maj7', 'G#m', 'G#m7', 'A#m', 'A#m7', 'B', 'Bmaj7', 'C#', 'C#7', 'D#m', 'D#m7', 'E#dim'],

					//Gb major
					'Gb Major': ['Gb', 'Gbmaj7', 'Abm', 'Abm7', 'Bbm', 'Bbm7', 'Cb', 'Cbmaj7', 'Db', 'Db7', 'Ebm', 'Ebm7', 'Fdim'],

					//G major
					'G Major': ['G', 'Gmaj7', 'Am', 'Am7', 'Bm', 'Bm7', 'C', 'Cmaj7', 'D', 'D7', 'Em', 'Em7', 'F#dim'],

					//G# major
					'G# Major': ['G#', 'G#maj7', 'A#m', 'A#m7', 'B#m', 'B#m7', 'C#', 'C#maj7', 'D#', 'D#7', 'E#m', 'E#m7', 'F##dim'],

					//Ab major
					'Ab Major': ['Ab', 'Abmaj7', 'Bbm', 'Bbm7', 'Cm', 'Cm7', 'Db', 'Dbmaj7', 'Eb', 'Eb7', 'Fm', 'Fm7', 'Gdim'],

					//A major
					'A Major': ['A', 'Amaj7', 'Bm', 'Bm7', 'C#m', 'C#m7', 'D', 'Dmaj7', 'E', 'E7', 'F#m', 'F#m7', 'G#dim'],

					//A# major
					'A# Major': ['A#', 'A#maj7', 'B#m', 'B#m7', 'C##m', 'C##m7', 'D#', 'D#maj7', 'E#', 'E#7', 'F##m', 'F##m7', 'G##dim'],

					//Bb major
					'Bb Major': ['Bb', 'Bbmaj7', 'Cm', 'Cm7', 'Dm', 'Dm7', 'Eb', 'Ebmaj7', 'F', 'F7', 'Gm', 'Gm7', 'Adim'],

					//B major
					'B Major': ['B', 'Bmaj7', 'C#m', 'C#m7', 'D#m', 'D#m7', 'E', 'Emaj7', 'F#', 'F#7', 'G#m', 'G#m7', 'A#dim'],
					
					//Minor Keys - circle of fifths order
					//C minor
					'C Minor': ['Eb', 'Ebmaj7', 'Fm', 'Fm7', 'Gm', 'Gm7', 'Ab', 'Abmaj7', 'Bb', 'Bb7', 'Cm', 'Cm7', 'Ddim'],
					
					//G minor
					'G Minor': ['Bb', 'Bbmaj7', 'Cm', 'Cm7', 'Dm', 'Dm7', 'Eb', 'Ebmaj7', 'F', 'F7', 'Gm', 'Gm7', 'Adim'],
					
					//D minor
					'D Minor': ['F', 'Fmaj7', 'Gm', 'Gm7', 'Am', 'Am7', 'Bb', 'Bbmaj7', 'C', 'C7', 'Dm', 'Dm7', 'Edim'],
					
					//A minor
					'A Minor': ['C', 'Cmaj7', 'Dm', 'Dm7', 'Em', 'Em7', 'F', 'Fmaj7', 'G', 'G7', 'Am', 'Am7', 'Bdim'],
					
					//E minor
					'E Minor': ['G', 'Gmaj7', 'Am', 'Am7', 'Bm', 'Bm7', 'C', 'Cmaj7', 'D', 'D7', 'Em', 'Em7', 'F#dim'],
					
					//B minor
					'B Minor': ['D', 'Dmaj7', 'Em', 'Em7', 'F#m', 'F#m7', 'G', 'Gmaj7', 'A', 'A7', 'Bm', 'Bm7', 'C#dim'],
					
					//F# minor
					'F# Minor': ['A', 'Amaj7', 'Bm', 'Bm7', 'C#m', 'C#m7', 'D', 'Dmaj7', 'E', 'E7', 'F#m', 'F#m7', 'G#dim'],
					
					//Db minor
					'C# Minor': ['E', 'Emaj7', 'F#m', 'F#m7', 'G#m', 'G#m7', 'A', 'Amaj7', 'B', 'B7', 'C#m', 'C#m7', 'D#dim'],
					
					//Ab minor
					'Ab Minor': ['B', 'Bmaj7', 'C#m', 'C#m7', 'D#m', 'D#m7', 'E', 'Emaj7', 'F#', 'F#7', 'G#m', 'G#m7', 'A#dim'],
					
					//Eb minor
					'Eb Minor': ['F#', 'F#maj7', 'G#m', 'G#m7', 'A#m', 'A#m7', 'B', 'Bmaj7', 'C#', 'C#7', 'D#m', 'D#m7', 'E#dim'],
					
					//Bb minor
					'Bb Minor': ['Db', 'Dbmaj7', 'Ebm', 'Ebm7', 'Fm', 'Fm7', 'Gb', 'Gbmaj7', 'Ab', 'Ab7', 'Bbm', 'Bbm7', 'Cdim'],
					
					//F minor
					'F Minor': ['Ab', 'Abmaj7', 'Bbm', 'Bbm7', 'Cm', 'Cm7', 'Db', 'Dbmaj7', 'Eb', 'Eb7', 'Fm', 'Fm7', 'Gdim']
					
			};

			// Given a set of keys to search, and a set of chords to search for
			// return the key with the most chords in it
			// docs: http://documentcloud.github.com/underscore/
			function topKey(keys, chords) {
					var counts = {};
					var result = [];
	
					// for each key, count how many chords of the key match the chords the user chose
					_(keys).each(function(values, key, list) {
							counts[key] = _(values).chain().intersect(this.chords).size().value();
							}, {chords: chords}
					);
	
					// results is now a Hash of Key => count pairs, e.g. {'A Major': 0, 'Bb Major': 5, ...}
	
					// get the highest count
					var max = _(counts).max();
	
					// Add the name of the key if its count is = to the max
					_(counts).each(function(value, key, list) {
							if (value === this.max) {
									result.push(key);
							}
							}, {max: max}
					);
	
					return result; // result is an array of keynames e.g. ['A Major', 'G Major']
			}

			//  the function that will one day find the key
			function namethatkey() {
	
				// set default values to '--' until a chord is selected so the function won't break
				var chord0value = '--';
				var chord1value = '--';
				var chord2value = '--';
				var chord3value = '--';
				var chord4value = '--';

				if ($('#chord_count0').length !== 0) {
					var chord0value = document.getElementById('chord_count0').innerHTML;
				}
		
				if ($('#chord_count1').length !== 0) {
					var chord1value = document.getElementById('chord_count1').innerHTML;
				}
		
				if ($('#chord_count2').length !== 0) {
					var chord2value = document.getElementById('chord_count2').innerHTML;
				}
		
				if ($('#chord_count3').length !== 0) {
					var chord3value = document.getElementById('chord_count3').innerHTML;
				}
		
				if ($('#chord_count4').length !== 0) {
					var chord4value = document.getElementById('chord_count4').innerHTML;
				}
	
		
	
				var chords = [chord0value, chord1value, chord2value, chord3value, chord4value];
				var topkeys = topKey(Keys, chords);

				document.getElementById('result').style.display = "block";
				document.getElementById('thekey').innerHTML = "A song with chords: " + chords.join(", ") + " is most likely in the key of";
				// document.getElementById('keyletter').innerHTML = topkeys.join("<br /><span class='or'>or</span><br /> ");
	
				// if no chords are selected don't show the #result div
				//if ($('.selected').length == 0) {
				//	$('#result').hide();
				//}
				
				// Circle of Fifth Highlighting
				
				// Remove all selected_slice/selected_slice_minor classes to reset
				$('.selected_slice').removeClass('selected_slice');
				$('.selected_slice_minor').removeClass('selected_slice_minor');
		

				// Give the resulting *Major ids .selected_slice
				_(topkeys).each(function(item,index) {

				var id = item.replace(" ", "_").replace("#", "sharp");
				$('#'+id+' .pie').addClass('selected_slice');

				});
				
				// Give the resulting *Minor ids .selected_slice_minor
				_(topkeys).each(function(item,index) {

				var id = item.replace(" ", "_").replace("#", "sharp");
				$('#'+id+' .pie_minor').addClass('selected_slice_minor');

				});
				
				// Remove all selected_slice / selected_slice_minor if nothing is selected
				if ($('#chord_selector td.selected').length == 0) {
				$('.selected_slice').removeClass('selected_slice');
				$('.selected_slice_minor').removeClass('selected_slice_minor');
				}
			}


			// Setup events after dom is loaded
			$(document).ready(function() {

				//  jquery slider toggle for #instructions
				$('#toggle_instr').click(function() {
					$('#instructions').slideToggle('medium', function() {
  					});
				});


				//  apply .highlight to each of the above td
				$('#chord_selector td').addClass('highlight');

				//  toggle when clicked to .selected and add a unique chord count id - ONLY ALLOW 5
				$('#chord_selector td').click(function () {

				if ($(this).hasClass('selected')) {
					$(this).removeClass('selected');
					$(this).removeAttr('id');
				}
	
				else {
					if($('#chord_selector td.selected').length < 5) {
						if($('#chord_count0').length == 0) {
							$(this).addClass('selected');
							$(this).attr('id','chord_count0');
							}
				
						else if($('#chord_count1').length == 0) {
							$(this).addClass('selected');
							$(this).attr('id','chord_count1');
							}
				
						else if($('#chord_count2').length == 0) {
							$(this).addClass('selected');
							$(this).attr('id','chord_count2');
							}
				
						else if($('#chord_count3').length == 0) {
							$(this).addClass('selected');
							$(this).attr('id','chord_count3');
							}
				
						else if($('#chord_count4').length == 0) {
							$(this).addClass('selected');
							$(this).attr('id','chord_count4');
							}
						}
					}
				
				});

	
				//  add onclick attribute to call namethatkey() on all td in the above table
				$('#chord_selector td').attr('onclick','namethatkey()');
				
				//  click to remove .selected &amp; ids from chord table (clears selections)
				$('#clear_selected').click(function() {
					$('#chord_selector td').removeClass('selected');
					$('#chord_selector td').removeAttr('id');
					namethatkey();
				});
				
				
			});

	</script>


	<!--Digg Script-->
	<script type="text/javascript">
	(function() {
	var s = document.createElement('SCRIPT'), s1 = document.getElementsByTagName('SCRIPT')[0];
	s.type = 'text/javascript';
	s.async = true;
	s.src = 'http://widgets.digg.com/buttons.js';
	s1.parentNode.insertBefore(s, s1);
	})();
	</script>

	<!-- google analytics -->
	<script type="text/javascript">

	  var _gaq = _gaq || [];
	  _gaq.push(['_setAccount', 'UA-1454657-14']);
	  _gaq.push(['_trackPageview']);

	  (function() {
	    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
	    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
	    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	  })();
	</script>
</head>
<body>
	<div id="wrapper">
		<div id="header">
			<h1>Name That Key</h1>
			<a href="javascript:;" id="toggle_instr"><small>Instructions</small></a>
			<div id="social">
				<a class="DiggThisButton DiggMedium"></a>
				<a href="http://twitter.com/home?status=I used Name That Key - www.namethatkey.com to find the key of a song!" target="_blank"><img src="twitter.png" alt="Add to Twitter" title="Tweet This" /></a>
				<iframe src="http://www.facebook.com/plugins/like.php?href=www.namethatkey.com&amp;layout=button_count&amp;show_faces=false&amp;width=75&amp;action=like&amp;colorscheme=light&amp;height=21" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:75px; height:21px;" allowTransparency="true"></iframe>
			</div>			
		</div>
		<div id="instructions">
			<p>To see an educated guess as to what key a song's in by it's chords, choose the chords below (up to 5) and see the results in the green box.  This searches all 12 possible keys for the selected chords (diatonically) and returns the keys with most matches.  If there is more than one key that contains the selected chords it will display all relevant keys.</p>
		</div>
		<div id="enterchords">
			<h3>Pick Chords to Find the Key</h3>
			<table id="chord_selector">
				<tr><th>Major</th><th>Minor</th><th>Dominant 7</th><th>Major 7</th><th>Minor 7</th><th>Diminished</th></tr>
				<tr><td>C</td><td>Cm</td><td>C7</td><td>Cmaj7</td><td>Cm7</td><td>Cdim</td></tr>
				<tr><td>C#</td><td>C#m</td><td>C#7</td><td>C#maj7</td><td>C#m7</td><td>C#dim</td></tr>
				<tr><td>Db</td><td>Dbm</td><td>Db7</td><td>Dbmaj7</td><td>Dbm7</td><td>Dbdim</td></tr>
				<tr><td>D</td><td>Dm</td><td>D7</td><td>Dmaj7</td><td>Dm7</td><td>Ddim</td></tr>
				<tr><td>D#</td><td>D#m</td><td>D#7</td><td>D#maj7</td><td>D#m7</td><td>D#dim</td></tr>
				<tr><td>Eb</td><td>Ebm</td><td>Eb7</td><td>Ebmaj7</td><td>Ebm7</td><td>Ebdim</td></tr>
				<tr><td>E</td><td>Em</td><td>E7</td><td>Emaj7</td><td>Em7</td><td>Edim</td></tr>
				<tr><td>E#</td><td>E#m</td><td>E#7</td><td>E#maj7</td><td>E#m7</td><td>E#dim</td></tr>
				<tr><td>F</td><td>Fm</td><td>F7</td><td>Fmaj7</td><td>Fm7</td><td>Fdim</td></tr>
				<tr><td>F#</td><td>F#m</td><td>F#7</td><td>F#maj7</td><td>F#m7</td><td>F#dim</td></tr>
				<tr><td>Gb</td><td>Gbm</td><td>Gb7</td><td>Gbmaj7</td><td>Gbm7</td><td>Gbdim</td></tr>
				<tr><td>G</td><td>Gm</td><td>G7</td><td>Gmaj7</td><td>Gm7</td><td>Gdim</td></tr>
				<tr><td>G#</td><td>G#m</td><td>G#7</td><td>G#maj7</td><td>G#m7</td><td>G#dim</td></tr>
				<tr><td>Ab</td><td>Abm</td><td>Ab7</td><td>Abmaj7</td><td>Abm7</td><td>Abdim</td></tr>
				<tr><td>A</td><td>Am</td><td>A7</td><td>Amaj7</td><td>Am7</td><td>Adim</td></tr>
				<tr><td>A#</td><td>A#m</td><td>A#7</td><td>A#maj7</td><td>A#m7</td><td>A#dim</td></tr>
				<tr><td>Bb</td><td>Bbm</td><td>Bb7</td><td>Bbmaj7</td><td>Bbm7</td><td>Bbdim</td></tr>
				<tr><td>B</td><td>Bm</td><td>B7</td><td>Bmaj7</td><td>Bm7</td><td>Bdim</td></tr>
				<tr><td>B#</td><td>B#m</td><td>B#7</td><td>B#maj7</td><td>B#m7</td><td>B#dim</td></tr>
			</table>
			<br />
			<a href="javascript:;" id="clear_selected"><small>Clear Selections</small></a>
		</div>
		<div id="result">
			<h3>The Key</h3>
			<p id="thekey"></p>
				<div id="keyletter"></div>
				
				
				
				<div id="circle_of_fifths">

	<!--Major Pie-->
	<div id="major_pie">
		<div id="C_Major" class="hold">
    		<div class="pie"></div>
		</div>

		<div id="D_Major" class="hold">
 		   <div class="pie"></div>
		</div>

		<div id="G_Major" class="hold">
 		   <div class="pie"></div>
		</div>

		<div id="A_Major" class="hold">

		    <div class="pie"></div>
		</div>

		<div id="E_Major" class="hold">
		    <div class="pie"></div>
		</div>

		<div id="B_Major" class="hold">
  		  <div class="pie"></div>
		</div>

		<div id="Fsharp_Major" class="hold">
 		   <div class="pie"></div>
		</div>

		<div id="Csharp_Major" class="hold">
		    <div class="pie"></div>
		</div>

		<div id="Ab_Major" class="hold">

   			<div class="pie"></div>
		</div>

		<div id="Eb_Major" class="hold">
 			<div class="pie"></div>
		</div>

		<div id="Bb_Major" class="hold">
			<div class="pie"></div>
		</div>

		<div id="F_Major" class="hold">
			<div class="pie"></div>
		</div>
	</div>



	<div id="minor_pie">

		<div id="A_Minor" class="hold_minor">

   			<div class="pie_minor"></div>
		</div>

		<div id="B_Minor" class="hold_minor">
  			<div class="pie_minor"></div>
		</div>

		<div id="E_Minor" class="hold_minor">
			<div class="pie_minor"></div>
		</div>

		<div id="Fsharp_Minor" class="hold_minor">
    		<div class="pie_minor"></div>
		</div>

		<div id="Csharp_Minor" class="hold_minor">
    		<div class="pie_minor"></div>
		</div>

		<div id="Ab_Minor" class="hold_minor">

    		<div class="pie_minor"></div>
		</div>

		<div id="Eb_Minor" class="hold_minor">
    		<div class="pie_minor"></div>
		</div>

		<div id="Bb_Minor" class="hold_minor">
    		<div class="pie_minor"></div>
		</div>

		<div id="F_Minor" class="hold_minor">
    		<div class="pie_minor"></div>
		</div>

		<div id="C_Minor" class="hold_minor">
    		<div class="pie_minor"></div>
		</div>

		<div id="G_Minor" class="hold_minor">

    		<div class="pie_minor"></div>
		</div>

		<div id="D_Minor" class="hold_minor">
    		<div class="pie_minor"></div>
		</div>

	</div>
	<!--Major Labels-->
	<div id="Cmaj">C</div>

	<div id="Gmaj">G</div>
	<div id="Dmaj">D</div>
	<div id="Amaj">A</div>
	<div id="Emaj">E</div>
	<div id="Bmaj">B</div>
	<div id="Fsharpmaj">F#</div>

	<div id="Csharpmaj">C#</div>
	<div id="Aflatmaj">Ab</div>
	<div id="Eflatmaj">Eb</div>
	<div id="Bflatmaj">Bb</div>
	<div id="Fmaj">F</div>

        <!--Minor Labels-->

	<div id="Cm">Cm</div>
	<div id="Gm">Gm</div>
	<div id="Dm">Dm</div>
	<div id="Am">Am</div>
	<div id="Em">Em</div>
	<div id="Bm">Bm</div>

	<div id="Fsharpm">F#m</div>
	<div id="Csharpm">C#m</div>
	<div id="Aflatm">Abm</div>
	<div id="Eflatm">Ebm</div>
	<div id="Bflatm">Bbm</div>
	<div id="Fm">Fm</div>

</div>

				
				
				
		</div>
		<div id="footer">
			<p>&copy; 2010 <a href="http://www.grimmdude.com/">Garrett Grimm</a> &amp; <a href="http://robinator.github.com/">Rob Law</a></p>
		</div>
	</div><!--/wrapper-->
</body>
</html>


